{
    "constants": {},
    "definitions": {
        "DEFAUT": {
            "img": "<svg xmlns='http://www.w3.org/2000/svg' width='100px' height='100px' version='1.1'><circle cx='50' cy='50' r='45' stroke='#0000FF' stroke-width='4' fill='#0000FF'/></svg>`",
            "imgSize": [
                100,
                100
            ],
            "scale": 0.10
        },
        "E_VANNE,1500,OUVERTE": {
            "img": "<svg xmlns='http://www.w3.org/2000/svg' width='100px' height='100px' version='1.1'> <polygon points='10,20 50,50 10,80' stroke='blue'  stroke-linecap='butt' stroke-linejoin='miter' stroke-width='4' fill='white'/><polygon points='90,20 50,50 90,80' stroke='blue'  stroke-linecap='butt' stroke-linejoin='miter' stroke-width='4' fill='white'/></svg>`)",
            "imgSize": [
                100,
                100
            ],
            "scale": 0.30
        },
        "E_VANNE,1500,FERMEE": {
            "img": "<svg xmlns='http://www.w3.org/2000/svg' width='100px' height='100px' version='1.1'><polygon points='10,20 50,50 10,80' stroke='#FF0000'  stroke-linecap='butt' stroke-linejoin='miter' stroke-width='4' fill='#FF0000'/><polygon points='90,20 50,50 90,80' stroke='#FF0000'  stroke-linecap='butt' stroke-linejoin='miter' stroke-width='4' fill='#FF0000'/></svg>",
            "imgSize": [
                100,
                100
            ],
            "scale": 0.30
        },
        "E_VANNE,3000,OUVERTE": {
            "img": "<svg xmlns='http://www.w3.org/2000/svg' width='100px' height='100px' version='1.1'><circle cx='50' cy='50' r='45' stroke='#0000FF' stroke-width='4' fill='#0000FF'/></svg>",
            "imgSize": [
                100,
                100
            ],
            "scale": 0.15
        },
        "E_VANNE,3000,FERMEE": {
            "img": "<svg xmlns='http://www.w3.org/2000/svg' width='120px' height='120px' version='1.1'><circle cx='60' cy='60' r='40' stroke='#FF0000' stroke-width='4' fill='#FF0000'/><line x1='5' y1='5' x2='115' y2='115' stroke='#FF0000' stroke-linecap='round' stroke-width='10' /><line x1='115' y1='5' x2='5' y2='115' stroke='#FF0000' stroke-linecap='round' stroke-width='10' /></svg>",
            "imgSize": [
                120,
                120
            ],
            "scale": 0.15
        },
        "E_RACCOR": {
            "img": "<svg xmlns='http://www.w3.org/2000/svg' width='100px' height='100px' version='1.1'><path d='M40,0 L65,50 L40,100 L40,0' stroke='blue' stroke-width='4' fill='white' /></svg>",
            "imgSize": [
                100,
                100
            ],
            "scale": 0.25
        },
        "E_APMESU": {
            "img": "<svg xmlns='http://www.w3.org/2000/svg' width='100px' height='100px' version='1.1'><line x1='20' y1='80' x2='80' y2='20' stroke='blue' stroke-width='4' /><polygon points='70,10 90,10 90,30' stroke='blue' stroke-linejoin='round' stroke-width='4' fill='white'/><circle cx='50' cy='50' r='15' stroke='blue' stroke-width='4' fill='white' /></svg>",
            "imgSize": [
                100,
                100
            ],
            "scale": 0.35
        },
        "E_EXHAUR": {
            "img": "<svg xmlns='http://www.w3.org/2000/svg' width='100px' height='100px' version='1.1'><polygon points='5,95 95,95 50,5' stroke='blue' stroke-width='4' fill='blue'/></svg>",
            "imgSize": [
                100,
                100
            ],
            "scale": 0.35
        },
        "E_REFOUL": {
            "img": "<svg xmlns='http://www.w3.org/2000/svg' width='100px' height='100px' version='1.1'><path d='M5,5 L95,5 L95,95 L5,95 L5,5 ' stroke='blue' stroke-linecap='square' stroke-width='4' fill='white' /><text x='20' y='80' fill='blue'  font-size='80px' font-family='helvetica'>R</text></svg>",
            "imgSize": [
                100,
                100
            ],
            "scale": 0.35
        },
        "E_REGDEB": {
            "img": "<svg xmlns='http://www.w3.org/2000/svg' width='100px' height='100px' version='1.1'><path d='M70,2 L70,18 L88,10 L70,2 L70,10 L10,10 ' stroke='white' stroke-width='6' fill='white' /><path d='M10,83 L10,20 L90,80 L90,18' stroke='white' stroke-width='6' fill='none' /><path d='M70,2 L70,18 L88,10 L70,2 L70,10 L10,10 ' stroke='blue' stroke-width='4' fill='white' /><path d='M10,83 L10,20 L90,80 L90,18' stroke='blue' stroke-width='4' fill='none' /></svg>",
            "imgSize": [
                100,
                100
            ],
            "scale": 0.35
        },
        "E_REGPRE": {
            "img": "<svg xmlns='http://www.w3.org/2000/svg' width='100px' height='100px' version='1.1'><line x1='5' y1='15' x2='65' y2='15' stroke='blue' stroke-linecap='square' stroke-width='4' /><polygon points='65,15 95,15 65,5' stroke='blue'  stroke-linejoin='miter' stroke-width='4' fill='blue'/><polygon points='5,30 5,90 50,60' stroke='blue'  stroke-width='4' fill='blue'/><path d='M50,60 L95,90 L95,30' stroke='blue' stroke-width='4' fill='none' /></svg>",
            "imgSize": [
                100,
                100
            ],
            "scale": 0.35
        },
        "E_STOCKA": {
            "img": "<svg xmlns='http://www.w3.org/2000/svg' width='100px' height='100px' version='1.1'><circle cx='50' cy='50' r='30' stroke='blue' stroke-width='3' fill='blue' /><path d='M50,25 L95,25 L95,75 L50,75' stroke='blue' stroke-width='4' fill='none' /></svg>",
            "imgSize": [
                100,
                100
            ],
            "scale": 0.50
        },
        "E_TRAITE": {
            "img": "<svg xmlns='http://www.w3.org/2000/svg' width='100px' height='100px' version='1.1'><path d='M0,15 L0,85 L25,85 L25,50 L25,85 L75,85 L75,50 L75,85 L100,85 L100,15 L50,15 L50,45 L50,15 L0,15' stroke='blue' stroke-width='4' fill='white' /></svg>",
            "imgSize": [
                100,
                100
            ],
            "scale": 0.30
        },
        "compo": "=> F.get('COMPO') ",
        "isVanne": "=> D.compo == 'E_VANNE' ",
        "etatNormal": "=> D.isVanne ? F.get('ETATN') == 'FERMEE' ? 'FERMEE' : 'OUVERTE' : null",
        "angle": "=> ['E_RACCOR', 'E_VANNE', 'E_REGDEB', 'E_REGPRE'].includes(D.compo) ? 0 : F.get('GEORIENT') * Math.PI / 180"
    },
    "format": "geojson",
    "crs": "EPSG:4326",
    "group": "RÃ©seau Eau",
    "title": "Noeud AEP",
    "id": "NUMERO",
    "scales": [
        0,
        1500,
        3000
    ],
    "class": "=> F.get('COMPO')",
    "cacheKey": "=> D.isVanne ? [class,LSCALE,D.etatNormal] : class",
    "static": [
        {
            "when": "=> D.isVanne  || scale <= 1500",
            "image": [
                "? D.isVanne        => D.[[D.compo,LSCALE,D.etatNormal]]",
                "? scale <= 1500    => D[D.compo]",
                "default            => null"
            ],
            "text": {
                "font": "bold 18px Arial",
                "fill": {
                    "color": "#0000FF"
                },
                "stroke": {
                    "color": "#FFFFFF",
                    "width": 1
                },
                "textAlign": "center",
                "textBaseline": "middle",
                "offsetX": 20,
                "offsetY": -20
            }
        }
    ],
    "dynamic": {
        "#/0/text/text": "=> F.get('TXTGRA')?.replace(/;/, '\n')"
    }
}